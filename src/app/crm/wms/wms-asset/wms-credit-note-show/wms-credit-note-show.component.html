<div class="container-fluid bg-body row d-flex justify-content-center w-100">
  <!-- Page Header -->
  <!-- Actions -->
  <div class="d-flex justify-content-between row" >
    <div class="col-8">
      <button (click)="router.navigate(['/admin/crm/wms/wms/credit-notes'])" color="primary"  mat-button>
        <mat-icon>arrow_back</mat-icon>
      </button>
      <button mat-button (click)="router.navigate(['/admin/crm/wms'])"  >
        <mat-icon class=" primary-blue-color">house</mat-icon>
        {{ "HOME" | translate }}
      </button>
      >
      <button mat-button (click)="router.navigate(['/admin/crm/wms/wms/credit-notes'])">
        <mat-icon class=" primary-blue-color">checklist</mat-icon>
        Bon de livraison
      </button>
      >
      <button mat-button>
        <mat-icon class=" primary-blue-color">details</mat-icon>
        {{ "DETAILS" | translate }}
      </button>
    </div>
    <div class="col-2 d-flex justify-content-end">
      <button [matMenuTriggerFor]="menu"  class="bg-spider scale-08 primary-blue-color fw-bold rounded-2" aria-label="Actions" mat-raised-button>
        Actions <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu" class="bg-spider scale-09">
        <button mat-menu-item >
          <mat-icon>add</mat-icon>
          Valider
        </button>
        <button mat-menu-item (click)="onDownLoadCreditNote()">
          <mat-icon>edit</mat-icon>
          Télécharger
        </button>
      </mat-menu>
    </div>
  </div>
  <hr>
</div>
<form [formGroup]="creditNoteForm">
  <section class="container-fluid px-2">
  <div class="row p-2">
    <ng-container  class="col-12 row " >
      <mat-card class="mt-2 rounded-2 bg-white mat-elevation-z2 border border-secondary-subtle border-1 col-6">
        <mat-card-content>
          <p class="fs-6 align-items-center d-flex primary-blue-color">
            <mat-icon class="scale-08">business</mat-icon>
            Informations General
          </p>
          <p><span class="text-secondary">Référence:</span> {{ creditNote.getValue().number }}</p>
          <p><span class="text-secondary">Status:</span>
            <button  [ngClass]="['btn', 'btn-sm', 'bg-warning-subtle']">
              {{ creditNote.getValue().status?.name }}</button>
          </p>
          <p><span class="text-secondary">Date:</span> {{ creditNote.getValue().createdAt | date:'dd/MM/YYYY HH:mm' }}</p>
        </mat-card-content>
      </mat-card>
      <mat-card class="mt-2 rounded-2 bg-white mat-elevation-z2 border border-secondary-subtle border-1 col-6">
        <mat-card-content>
          <p class="fs-6 align-items-center d-flex primary-blue-color">
            <mat-icon class="scale-08">business</mat-icon>
            Informations du Client
          </p>
          <p><span class="text-secondary">Client:</span> {{ creditNote.getValue().storageInvoice.storageContract?.customer?.name }}</p>
<!--          <p><span class="text-secondary">Contrat:</span> {{ deliveryCreditNote.getValue().number }}</p>-->
          <p>
            <span class="text-secondary">Facture:</span>
            <span > {{ creditNote.getValue().storageInvoice.number }}</span>
          </p>
        </mat-card-content>
      </mat-card>
    </ng-container>

    <mat-card class="mt-2 rounded-2 bg-white mat-elevation-z2 border border-secondary-subtle border-1 col-6">
      <mat-card-content>
        <p class="fs-6 align-items-center d-flex primary-blue-color">
          <mat-icon class="scale-08">business</mat-icon>
          Détails
        </p>
        <p class="d-flex justify-content-start ">
          <span class="text-secondary">Total HT:</span>
<!--          <span>{{ creditNote.getValue().totalHt }}</span>-->
         <span> <input type="number" step="0.1" class="form-control form-control-sm me-2" formControlName="totalHt"></span>
        </p>
        <p><span class="text-secondary">TVA:</span> {{ creditNote.getValue().tva }}</p>
        <p><span class="text-secondary">Total TTC:</span> {{ creditNote.getValue().totalTtc }}</p>
      </mat-card-content>
    </mat-card>

    <mat-card class="mt-2 rounded-2 bg-white mat-elevation-z2 border border-secondary-subtle border-1 col-6">

        <mat-card-content>
          <p class="fs-6 align-items-center d-flex primary-blue-color">
            <mat-icon class="scale-08">edit</mat-icon>
            Mise à jour Envoi & Retour
          </p>
          <div class="row d-flex justify-content-around">
            <div class="col-md-6">
              <label for="sendDate" class="form-label">Date d'envoi</label>
              <input
                type="date"
                id="sendDate"
                formControlName="sendDate"
                class="form-control form-control-sm"
              />
            </div>

            <div class="col-md-6">
              <label for="sendStatus" class="form-label">Status d'envoi</label>
              <select
                id="sendStatus"
                formControlName="sendStatus"
                class="form-select form-select-sm"
              >
                <option [ngValue]="null">Choisir...</option>
                <option value="SENT">Envoyé</option>
                <option value="PENDING">En attente</option>
                <option value="CANCELLED">Annulé</option>
              </select>
            </div>

            <div class="col-md-6">
              <label for="returnDate" class="form-label">Date de retour</label>
              <input
                type="date"
                id="returnDate"
                formControlName="returnDate"
                class="form-control form-control-sm"
              />
            </div>

            <div class="col-md-6">
              <label for="returnStatus" class="form-label">Status de retour</label>
              <select
                id="returnStatus"
                formControlName="returnStatus"
                class="form-select form-select-sm"
              >
                <option [ngValue]="null">Choisir...</option>
                <option value="RETURNED">Retourné</option>
                <option value="PENDING">En attente</option>
                <option value="CANCELLED">Annulé</option>
              </select>
            </div>
          </div>

          <!--      <div class="col-12 mt-2 text-end">-->
          <!--        <button (click)="onUpdateInvoice()" mat-raised-button color="primary" type="submit">-->
          <!--          Mettre à jour-->
          <!--        </button>-->
          <!--      </div>-->
        </mat-card-content>


    </mat-card>
  </div>
</section>
</form>
<app-general-infos
  [createdAt]="creditNote.getValue().createdAt" [createdBy]="creditNote.getValue().createdBy"
  [updatedAt]="creditNote.getValue().updatedAt" [updatedBy]="creditNote.getValue().updatedBy"
></app-general-infos>
